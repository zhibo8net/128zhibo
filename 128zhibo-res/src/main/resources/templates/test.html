<!DOCTYPE html>

<html lang="zh-CN">

<head>

    <meta charset="UTF-8">

    <title>前端播放m3u8格式视频</title>

    <!-- <link rel="stylesheet" href="video-js.min.css"> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.2.4/video-js.min.css" rel="stylesheet">
    <!-- <script src="video.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.2.4/video.js"></script>

</head>

<body>

    <style>

        .video-js .vjs-tech{position:relative !important;}

</style>

    <div>

        <video id="myVideo" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" data-setup='{}'
            style='width: 100%;height: auto'>

            <source id="source" src="http://27498.liveplay.myqcloud.com/live/27498_stream1807172.m3u8" type="application/x-mpegURL">
            </source>

        </video>

    </div>

    <div class="qiehuan" style="width:100px;height: 100px;background: red;margin:0 auto;line-height: 100px;color:#fff;text-align: center">切换视频</div>

</body>

<script>
    // videojs 简单使用

    var myVideo = videojs('myVideo', {

        bigPlayButton: true,

        textTrackDisplay: false,

        posterImage: false,

        errorDisplay: false,

    })

    var changeVideo = function (vdoSrc) {

        if (/\.m3u8$/.test(vdoSrc)) { //判断视频源是否是m3u8的格式

            myVideo.src({

                src: vdoSrc,

                type: 'application/x-mpegURL' //在重新添加视频源的时候需要给新的type的值

            })

        } else {

            myVideo.src(vdoSrc)

        }

        myVideo.load();

        myVideo.play();

    }

    var src = 'http://27498.liveplay.myqcloud.com/live/27498_stream1807172.m3u8';



    document.querySelector('.qiehuan').addEventListener('click', function () {

        changeVideo(src);

    })
</script>